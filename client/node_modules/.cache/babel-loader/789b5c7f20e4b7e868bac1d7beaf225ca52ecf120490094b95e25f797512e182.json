{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Bar}from'react-chartjs-2';import MonthlyBudgetPlanner from'./MonthlyBudgetPlanner';import BudgetAlerts from'./BudgetAlerts';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from'chart.js';import IncomeVsExpenses from'../visualizations/IncomeVsExpenses';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend);const BudgetDashboard=()=>{const[budgets,setBudgets]=useState([]);const[expenses,setExpenses]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchData=async()=>{try{const token=localStorage.getItem('token');const headers={'x-auth-token':token};const[budgetsRes,expensesRes]=await Promise.all([axios.get('http://localhost:5000/api/budget',{headers}),axios.get('http://localhost:5000/api/expenses',{headers})]);setBudgets(budgetsRes.data);setExpenses(expensesRes.data);setLoading(false);}catch(err){console.error('Error fetching data:',err);setLoading(false);}};fetchData();},[]);const chartData={labels:budgets.map(budget=>budget.category),datasets:[{label:'Budget Amount',data:budgets.map(budget=>budget.amount),backgroundColor:'rgba(54, 162, 235, 0.5)'},{label:'Actual Expenses',data:budgets.map(budget=>{return expenses.filter(expense=>expense.category===budget.category&&new Date(expense.date).getMonth()===new Date(budget.month).getMonth()).reduce((total,expense)=>total+expense.amount,0);}),backgroundColor:'rgba(255, 99, 132, 0.5)'}]};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-8\",children:\"Budget Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsx(MonthlyBudgetPlanner,{onBudgetSet:newBudget=>setBudgets([...budgets,newBudget]),currentBudgets:budgets}),/*#__PURE__*/_jsx(BudgetAlerts,{budgets:budgets,expenses:expenses})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(IncomeVsExpenses,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Budget vs. Actual Expenses\"}),/*#__PURE__*/_jsx(Bar,{data:chartData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Current Budgets\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Budget\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Spent\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Remaining\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:budgets.map(budget=>{const spent=expenses.filter(expense=>expense.category===budget.category&&new Date(expense.date).getMonth()===new Date(budget.month).getMonth()).reduce((total,expense)=>total+expense.amount,0);const remaining=budget.amount-spent;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:budget.category}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4\",children:[\"$\",budget.amount]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4\",children:[\"$\",spent]}),/*#__PURE__*/_jsxs(\"td\",{className:`px-6 py-4 ${remaining<0?'text-red-600':'text-green-600'}`,children:[\"$\",remaining]})]},budget._id);})})]})})]})]});};export default BudgetDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Bar","MonthlyBudgetPlanner","BudgetAlerts","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","IncomeVsExpenses","jsx","_jsx","jsxs","_jsxs","register","BudgetDashboard","budgets","setBudgets","expenses","setExpenses","loading","setLoading","fetchData","token","localStorage","getItem","headers","budgetsRes","expensesRes","Promise","all","get","data","err","console","error","chartData","labels","map","budget","category","datasets","label","amount","backgroundColor","filter","expense","Date","date","getMonth","month","reduce","total","children","className","onBudgetSet","newBudget","currentBudgets","spent","remaining","_id"],"sources":["F:/MY PLAYGROUND/WEB DEVELOPMENT/PROJECTS/AI-Powered-Personal-Finance-Management-System/client/src/components/budget/BudgetDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport MonthlyBudgetPlanner from './MonthlyBudgetPlanner';\r\nimport BudgetAlerts from './BudgetAlerts';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport IncomeVsExpenses from '../visualizations/IncomeVsExpenses';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst BudgetDashboard = () => {\r\n  const [budgets, setBudgets] = useState([]);\r\n  const [expenses, setExpenses] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const headers = { 'x-auth-token': token };\r\n        \r\n        const [budgetsRes, expensesRes] = await Promise.all([\r\n          axios.get('http://localhost:5000/api/budget', { headers }),\r\n          axios.get('http://localhost:5000/api/expenses', { headers })\r\n        ]);\r\n\r\n        setBudgets(budgetsRes.data);\r\n        setExpenses(expensesRes.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const chartData = {\r\n    labels: budgets.map(budget => budget.category),\r\n    datasets: [\r\n      {\r\n        label: 'Budget Amount',\r\n        data: budgets.map(budget => budget.amount),\r\n        backgroundColor: 'rgba(54, 162, 235, 0.5)',\r\n      },\r\n      {\r\n        label: 'Actual Expenses',\r\n        data: budgets.map(budget => {\r\n          return expenses\r\n            .filter(expense => \r\n              expense.category === budget.category &&\r\n              new Date(expense.date).getMonth() === new Date(budget.month).getMonth()\r\n            )\r\n            .reduce((total, expense) => total + expense.amount, 0);\r\n        }),\r\n        backgroundColor: 'rgba(255, 99, 132, 0.5)',\r\n      }\r\n    ]\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h2 className=\"text-3xl font-bold mb-8\">Budget Management</h2>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n        <MonthlyBudgetPlanner \r\n          onBudgetSet={(newBudget) => setBudgets([...budgets, newBudget])}\r\n          currentBudgets={budgets}\r\n        />\r\n        <BudgetAlerts budgets={budgets} expenses={expenses} />\r\n      </div>\r\n\r\n      <div className=\"mb-8\">\r\n        <IncomeVsExpenses />\r\n      </div>\r\n\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n        <h3 className=\"text-xl font-semibold mb-4\">Budget vs. Actual Expenses</h3>\r\n        <Bar data={chartData} />\r\n      </div>\r\n\r\n      <div className=\"mt-8 bg-white p-6 rounded-lg shadow-lg\">\r\n        <h3 className=\"text-xl font-semibold mb-4\">Current Budgets</h3>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                  Category\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                  Budget\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                  Spent\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                  Remaining\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {budgets.map((budget) => {\r\n                const spent = expenses\r\n                  .filter(expense => \r\n                    expense.category === budget.category &&\r\n                    new Date(expense.date).getMonth() === new Date(budget.month).getMonth()\r\n                  )\r\n                  .reduce((total, expense) => total + expense.amount, 0);\r\n                const remaining = budget.amount - spent;\r\n\r\n                return (\r\n                  <tr key={budget._id}>\r\n                    <td className=\"px-6 py-4\">{budget.category}</td>\r\n                    <td className=\"px-6 py-4\">${budget.amount}</td>\r\n                    <td className=\"px-6 py-4\">${spent}</td>\r\n                    <td className={`px-6 py-4 ${remaining < 0 ? 'text-red-600' : 'text-green-600'}`}>\r\n                      ${remaining}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BudgetDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}