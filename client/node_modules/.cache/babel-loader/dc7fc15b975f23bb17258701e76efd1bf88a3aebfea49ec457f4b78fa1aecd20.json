{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{BellIcon,XMarkIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationCenter=()=>{const[notifications,setNotifications]=useState([]);const[isOpen,setIsOpen]=useState(false);const[unreadCount,setUnreadCount]=useState(0);useEffect(()=>{fetchNotifications();// Set up polling for new notifications\nconst interval=setInterval(fetchNotifications,300000);// Check every 5 minutes\nreturn()=>clearInterval(interval);},[]);const fetchNotifications=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('http://localhost:5000/api/notifications',{headers:{'x-auth-token':token}});setNotifications(res.data);setUnreadCount(res.data.filter(n=>!n.isRead).length);}catch(err){console.error('Error fetching notifications:',err);}};const markAsRead=async id=>{try{const token=localStorage.getItem('token');await axios.put(`http://localhost:5000/api/notifications/${id}/read`,{},{headers:{'x-auth-token':token}});setNotifications(notifications.map(n=>n._id===id?{...n,isRead:true}:n));setUnreadCount(prev=>prev-1);}catch(err){console.error('Error marking notification as read:',err);}};const getPriorityColor=priority=>{switch(priority){case'HIGH':return'bg-red-100 text-red-800';case'MEDIUM':return'bg-yellow-100 text-yellow-800';case'LOW':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),className:\"relative p-2 text-gray-600 hover:text-gray-900\",children:[/*#__PURE__*/_jsx(BellIcon,{className:\"h-6 w-6\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full\",children:unreadCount})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Notifications\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-5 w-5\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:notifications.length>0?notifications.map(notification=>/*#__PURE__*/_jsx(\"div\",{className:`p-4 border-b ${!notification.isRead?'bg-blue-50':''}`,onClick:()=>!notification.isRead&&markAsRead(notification._id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold\",children:notification.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:notification.message}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-2 py-1 mt-2 text-xs font-semibold rounded-full ${getPriorityColor(notification.priority)}`,children:notification.priority})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(notification.date).toLocaleDateString()})]})},notification._id)):/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"No notifications\"})})]})]});};export default NotificationCenter;","map":{"version":3,"names":["React","useState","useEffect","axios","BellIcon","XMarkIcon","jsx","_jsx","jsxs","_jsxs","NotificationCenter","notifications","setNotifications","isOpen","setIsOpen","unreadCount","setUnreadCount","fetchNotifications","interval","setInterval","clearInterval","token","localStorage","getItem","res","get","headers","data","filter","n","isRead","length","err","console","error","markAsRead","id","put","map","_id","prev","getPriorityColor","priority","className","children","onClick","notification","title","message","Date","date","toLocaleDateString"],"sources":["F:/MY PLAYGROUND/WEB DEVELOPMENT/PROJECTS/AI-Powered-Personal-Finance-Management-System/client/src/components/notifications/NotificationCenter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { BellIcon, XMarkIcon } from '@heroicons/react/24/outline';\r\n\r\nconst NotificationCenter = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchNotifications();\r\n    // Set up polling for new notifications\r\n    const interval = setInterval(fetchNotifications, 300000); // Check every 5 minutes\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get('http://localhost:5000/api/notifications', {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      setNotifications(res.data);\r\n      setUnreadCount(res.data.filter(n => !n.isRead).length);\r\n    } catch (err) {\r\n      console.error('Error fetching notifications:', err);\r\n    }\r\n  };\r\n\r\n  const markAsRead = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`http://localhost:5000/api/notifications/${id}/read`, {}, {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      setNotifications(notifications.map(n => \r\n        n._id === id ? { ...n, isRead: true } : n\r\n      ));\r\n      setUnreadCount(prev => prev - 1);\r\n    } catch (err) {\r\n      console.error('Error marking notification as read:', err);\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'HIGH': return 'bg-red-100 text-red-800';\r\n      case 'MEDIUM': return 'bg-yellow-100 text-yellow-800';\r\n      case 'LOW': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-gray-900\"\r\n      >\r\n        <BellIcon className=\"h-6 w-6\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full\">\r\n            {unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50\">\r\n          <div className=\"p-4 border-b\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <h3 className=\"text-lg font-semibold\">Notifications</h3>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n              >\r\n                <XMarkIcon className=\"h-5 w-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"max-h-96 overflow-y-auto\">\r\n            {notifications.length > 0 ? (\r\n              notifications.map(notification => (\r\n                <div\r\n                  key={notification._id}\r\n                  className={`p-4 border-b ${!notification.isRead ? 'bg-blue-50' : ''}`}\r\n                  onClick={() => !notification.isRead && markAsRead(notification._id)}\r\n                >\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div>\r\n                      <h4 className=\"font-semibold\">{notification.title}</h4>\r\n                      <p className=\"text-sm text-gray-600\">{notification.message}</p>\r\n                      <span className={`inline-block px-2 py-1 mt-2 text-xs font-semibold rounded-full ${getPriorityColor(notification.priority)}`}>\r\n                        {notification.priority}\r\n                      </span>\r\n                    </div>\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      {new Date(notification.date).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"p-4 text-center text-gray-500\">\r\n                No notifications\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationCenter; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}